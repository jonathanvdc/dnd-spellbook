{"version":3,"sources":["model/spell.ts","Spellbook.tsx","FilterableSpellbook.tsx","SpellSearchBox.tsx","SpellbookAppBar.tsx","model/season.ts","App.tsx","serviceWorker.ts","index.tsx","SpellThumbnail.tsx","SpellCard.tsx","Tilt.tsx","SpellLink.tsx"],"names":["allClasses","getSpellThumbnailUrl","spell","thumbnail_url","school","sortedLevels","sortedSchools","sortBy","list","getKey","sort","a","b","x","y","groupBy","sortedGroups","bins","Map","value","key","bin","get","set","push","levelSpellPairs","values","spellsByLevel","spells","s","name","level","map","spellsBySchool","getShortLicenseName","code","getLicenseName","suffix","endsWith","substring","length","trimRight","getLicenseUrl","getSpellId","whitelist","enc","dash","toLowerCase","c","test","getSpellType","result","i","last","getOrinalSuffix","parseInt","ritual","Spellbook","headerClass","isFirefox","elems","this","props","levelSpells","levelName","Typography","variant","className","spellListItems","first","item","once","placeholder","SpellLink","PureComponent","localStorageKey","FilterableSpellbook","savedState","localStorage","getItem","state","JSON","parse","classes","setState","setItem","stringify","newClasses","filter","includes","updateClasses","val","some","usefulClasses","type","onChange","vals","toggleClass","src","alt","getFilteredSpells","Component","SpellSearchBox","suggestions","query","request","fuse","search","slice","_event","data","history","suggestion","params","newValue","isHighlighted","MenuItem","selected","component","SpellThumbnail","Fuse","shouldSort","threshold","location","distance","maxPatternLength","minMatchCharLength","keys","inputProps","onQueryChange","bind","onFocus","onBlur","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","getSuggestionValue","renderSuggestion","renderSuggestionsContainer","options","Paper","containerProps","square","children","withRouter","SpellbookAppBar","isSearching","baseName","AppBar","position","Toolbar","isMobile","to","createClasses","toggleSearching","isInSeason","date","season","from","month","getMonth","day","getDate","currentSeasons","results","today","Date","duration","getCurrentSeasons","LinterResults","lazy","theme","createMuiTheme","palette","primary","main","secondary","pink","App","allSpells","fetch","then","response","json","join","getMainClass","MuiThemeProvider","fallback","exact","path","render","routeProps","SpellRoute","find","match","spellId","SpellCard","thumbStyle","width","height","style","transform","LinterRoute","Boolean","window","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","bgClassName","undefined","showImage","html_whitelist","components","verbal","somatic","material","casting_time","range","mats","materials_needed","createFactFootnote","hide_links","href","node","trim","startsWith","is_in_html_whitelist","description","updatedDesc","replace","renderers","link","renderLink","source","allowNode","escapeHtml","unwrapDisallowed","baseDesc","formatDescription","quote","higher_levels","pageAttribution","pages","text","url","omitTitle","title","createExternalLink","author","author_website","license","sources","thumbnail_source","hide_footer","firstSource","citeIconSource","thumbnailUrl","thumbnailSource","createFooter","createPropertiesGrid","createDescription","createFootnotes","createSourceCitation","Tilt","left","top","transitionTimeout","updateCall","element","settings","reverse","Object","assign","max","perspective","easing","scale","speed","transition","axis","reset","findDOMNode","myNode","setTimeout","parentElement","querySelector","onPointerEnter","clearTimeout","cancelAnimationFrame","e","updateElementPosition","willChange","setTransition","requestAnimationFrame","persist","update","onPointerMove","onPointerLeave","nativeEvent","clientX","clientY","_x","Math","min","_y","tiltX","toFixed","tiltY","percentageX","percentageY","rect","getBoundingClientRect","offsetWidth","offsetHeight","getValues","createSpellUrl","spellLink","linkImage","followCursor","shiftX","shiftY","Trigger","Hover","SpellLinkPlaceholder"],"mappings":"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","file":"static/js/main.7c67bfe4.chunk.js","sourcesContent":["export type Class =\n    \"barbarian\" | \"bard\" | \"cleric\"\n    | \"druid\" | \"fighter\" | \"monk\"\n    | \"paladin\" | \"ranger\" | \"rogue\"\n    | \"sorcerer\" | \"warlock\" | \"wizard\";\n\nexport const allClasses: Class[] = [\n    \"barbarian\", \"bard\", \"cleric\",\n    \"druid\", \"fighter\", \"monk\",\n    \"paladin\", \"ranger\", \"rogue\",\n    \"sorcerer\", \"warlock\", \"wizard\"\n];\n\n/**\n * The components required to cast a spell.\n */\nexport type SpellComponents = {\n    /**\n     * Tells if the spell has any material components.\n     */\n    material: boolean;\n    /**\n     * A list of materials needed to cast the spell.\n     */\n    materials_needed?: string[];\n    /**\n     * Tells if a spell has a somatic component.\n     */\n    somatic: boolean;\n    /**\n     * Tells if a spell has a verbal component.\n     */\n    verbal: boolean;\n};\n\nexport type SpellLevel = \"cantrip\" | \"1\" | \"2\" | \"3\" | \"4\" | \"5\" | \"6\" | \"7\" | \"8\" | \"9\";\n\nexport type School = \"abjuration\" | \"conjuration\" | \"divination\" | \"enchantment\"\n    | \"evocation\" | \"illusion\" | \"necromancy\" | \"transmutation\";\n\n/**\n * Gets a URL to a particular spell's thumbnail.\n * @param spell The spell to find a thumbnail for.\n */\nexport function getSpellThumbnailUrl(spell: Spell): string {\n    if (spell.thumbnail_url) {\n        return spell.thumbnail_url;\n    } else {\n        // If we don't have a thumbnail for the spell, then we'll\n        // just create a URL that points to the school's thumbnail.\n        return `images/schools/${spell.school}.svg`;\n    }\n}\n\nconst sortedLevels: SpellLevel[] = [\"cantrip\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nconst sortedSchools: School[] = [\n    \"abjuration\", \"conjuration\", \"divination\", \"enchantment\",\n    \"evocation\", \"illusion\", \"necromancy\", \"transmutation\"\n];\n\nfunction sortBy<T>(list: T[], getKey: (val: T) => any): T[] {\n    return list.sort((a, b) => {\n        let x = getKey(a);\n        let y = getKey(b);\n        return +(x > y) - +(y > x);\n    });\n}\n\nfunction groupBy<T, TKey>(\n    list: T[],\n    sortedGroups: TKey[],\n    getKey: (val: T) => TKey):\n    { key: TKey, values: T[] }[] {\n\n    let bins = new Map<TKey, T[]>();\n    for (let value of list) {\n        let key = getKey(value);\n        let bin = bins.get(key);\n        if (!bin) {\n            bin = [];\n            bins.set(key, bin);\n        }\n        bin.push(value);\n    }\n\n    let levelSpellPairs: { key: TKey, values: T[] }[] = [];\n    for (let key of sortedGroups) {\n        let values = bins.get(key);\n        if (values) {\n            levelSpellPairs.push({ key, values });\n        }\n    }\n    return levelSpellPairs;\n}\n\n/**\n * Groups a list of spells by level.\n * @param spells A list of spells to group.\n */\nexport function spellsByLevel(spells: Spell[]): { level: SpellLevel, spells: Spell[] }[] {\n    return groupBy(sortBy(spells, s => s.name), sortedLevels, s => s.level)\n        .map(({ key, values }) => ({ level: key, spells: values }));\n}\n\n/**\n * Groups a list of spells by school.\n * @param spells A list of spells to group.\n */\nexport function spellsBySchool(spells: Spell[]): { school: School, spells: Spell[] }[] {\n    return groupBy(sortBy(spells, s => s.name), sortedSchools, s => s.school)\n        .map(({ key, values }) => ({ school: key, spells: values }));\n}\n\n/**\n * A description of a spell's source.\n */\nexport type SpellSource = {\n    /**\n     * The document in which the spell was originally described.\n     */\n    document: string;\n\n    /**\n     * The pages in the document that describe the spell.\n     */\n    pages?: string;\n};\n\n/**\n * A code that specifies a particular license.\n */\nexport type LicenseCode =\n    'CC-BY-3.0' | 'CC0-1.0'\n    | 'GPL-1.0-only' | 'GPL-1.0-or-later'\n    | 'GPL-2.0-only' | 'GPL-2.0-or-later'\n    | 'GPL-3.0-only' | 'GPL-3.0-or-later';\n\n/**\n * Gets a license's name based on its code.\n * @param code A license code.\n */\nexport function getLicenseName(code: LicenseCode): string {\n    switch (code) {\n        case 'CC-BY-3.0':\n            return 'Creative Commons Attribution 3.0 Unported';\n        case 'CC0-1.0':\n            return 'Creative Commons CC0 1.0 Universal';\n\n        case 'GPL-1.0-only':\n            return 'GNU General Public License v1.0 only';\n        case 'GPL-1.0-or-later':\n            return 'GNU General Public License v1.0 or later';\n        case 'GPL-2.0-only':\n            return 'GNU General Public License v2.0 only';\n        case 'GPL-2.0-or-later':\n            return 'GNU General Public License v2.0 or later';\n        case 'GPL-3.0-only':\n            return 'GNU General Public License v3.0 only';\n        case 'GPL-3.0-or-later':\n            return 'GNU General Public License v3.0 or later';\n    }\n}\n\n/**\n * Gets a license's name based on its code. If possible, the license\n * is shortened.\n * @param code A license code.\n */\nexport function getShortLicenseName(code: LicenseCode): string {\n    let name = getLicenseName(code);\n    let suffices = [\"only\", \"or later\"];\n    for (let suffix of suffices) {\n        if (name.endsWith(suffix)) {\n            name = name.substring(0, name.length - suffix.length).trimRight();\n        }\n    }\n    return name;\n}\n\n/**\n * Gets a URL to a license's text based on its code.\n * @param code A license code.\n */\nexport function getLicenseUrl(code: LicenseCode): string {\n    switch (code) {\n        case 'CC-BY-3.0':\n            return 'https://creativecommons.org/licenses/by/3.0/legalcode';\n        case 'CC0-1.0':\n            return 'https://creativecommons.org/publicdomain/zero/1.0/legalcode';\n\n        case 'GPL-1.0-only':\n            return 'https://www.gnu.org/licenses/old-licenses/gpl-1.0-standalone.html';\n        case 'GPL-1.0-or-later':\n            return 'https://www.gnu.org/licenses/old-licenses/gpl-1.0-standalone.html';\n        case 'GPL-2.0-only':\n            return 'https://www.gnu.org/licenses/old-licenses/gpl-2.0-standalone.html';\n        case 'GPL-2.0-or-later':\n            return 'https://www.gnu.org/licenses/old-licenses/gpl-2.0-standalone.html';\n        case 'GPL-3.0-only':\n            return 'https://www.gnu.org/licenses/gpl-3.0-standalone.html';\n        case 'GPL-3.0-or-later':\n            return 'https://www.gnu.org/licenses/gpl-3.0-standalone.html';\n    }\n}\n\n/**\n * A description of a thumbnail's source.\n */\nexport type ThumbnailSource = {\n    /**\n     * The thumbnail's title: its name or file name.\n     */\n    title?: string;\n\n    /**\n     * A URL to the thumbnail's original site.\n     */\n    url?: string;\n\n    /**\n     * The license under which the thumbnail is licensed.\n     */\n    license: LicenseCode;\n\n    /**\n     * The name of the thumbnail's author.\n     */\n    author: string;\n\n    /**\n     * The author's website, if any.\n     */\n    author_website?: string;\n};\n\n/**\n * A description of a spell.\n */\nexport type Spell = {\n    /**\n     * The amount of time it takes to cast the spell.\n     */\n    casting_time: string;\n\n    /**\n     * A list of all classes that can cast the spell.\n     */\n    classes: Class[];\n\n    /**\n     * The spell's components.\n     */\n    components: SpellComponents;\n\n    /**\n     * A description of the spell's effect.\n     */\n    description: string;\n\n    /**\n     * An optional description of what the spell does at higher levels.\n     */\n    higher_levels?: string;\n\n    /**\n     * A description of the spell's duration.\n     */\n    duration: string;\n\n    /**\n     * The spell's level.\n     */\n    level: SpellLevel;\n\n    /**\n     * The spell's name.\n     */\n    name: string;\n\n    /**\n     * The spell's range.\n     */\n    range: string;\n\n    /**\n     * Tells if the spell can be cast as a ritual.\n     */\n    ritual: boolean;\n\n    /**\n     * The school of magic to which the spell belongs.\n     */\n    school: School;\n\n    /**\n     * An optional URL to the spell's thumbnail.\n     */\n    thumbnail_url?: string;\n\n    /**\n     * An optional list of \n     */\n    thumbnail_source?: ThumbnailSource[];\n\n    /**\n     * An optional accent color for the spell.\n     */\n    accent_color?: string;\n\n    /**\n     * The document in which the spell was originally described.\n     */\n    source?: SpellSource;\n\n    /**\n     * A flavor quote.\n     */\n    quote?: string;\n};\n\n/**\n * Gets an identifier for a spell that is safe for use in a URL.\n * @param spell The spell to get an identifier for.\n */\nexport function getSpellId(spell: Spell): string {\n    let name = spell.name;\n    const whitelist = /[0-9a-zA-Z]/;\n    let enc = '';\n    let dash = false;\n    for (let c of name.toLowerCase()) {\n        if (whitelist.test(c)) {\n            enc += c;\n            dash = false;\n        } else if (!dash) {\n            enc += '-';\n            dash = true;\n        }\n    }\n    return enc;\n}\n\nfunction getOrinalSuffix(i: number) {\n    let last = i % 10;\n    if (last === 1) {\n        return 'st';\n    } else if (last === 2) {\n        return 'nd';\n    } else if (last === 3) {\n        return 'rd';\n    } else {\n        return 'th';\n    }\n}\n\nexport function getSpellType(spell: Spell) {\n    let result: string;\n    if (spell.level === \"cantrip\") {\n        result = `${spell.school} cantrip`;\n    } else {\n        result = `${spell.level}${getOrinalSuffix(parseInt(spell.level))}-level ${spell.school}`;\n    }\n    if (spell.ritual) {\n        result += \" (ritual)\";\n    }\n    return result;\n}\n","import React, { PureComponent } from \"react\";\nimport { Spell, spellsByLevel, spellsBySchool } from \"./model/spell\";\nimport { isFirefox } from \"react-device-detect\";\nimport \"./Spellbook.css\";\nimport \"./hr.css\";\nimport SpellLink, { SpellLinkPlaceholder } from \"./SpellLink\";\nimport LazyLoad from \"react-lazyload\";\nimport { Typography } from \"@material-ui/core\";\n\n/**\n * A component that displays a sequence of spells.\n */\nclass Spellbook extends PureComponent<{ spells: Spell[] }> {\n    render() {\n        let headerClass = \"SpellSchoolHeader Sideways\" + (isFirefox ? \"Firefox\" : \"Other\");\n        let elems = [];\n        for (let { level, spells: levelSpells } of spellsByLevel(this.props.spells)) {\n            let levelName = level === \"cantrip\" ? \"Cantrips\" : `Level ${level} spells`;\n            elems.push(<Typography variant=\"h6\" className=\"LevelHeader\">{levelName}</Typography>);\n\n            let spellListItems: JSX.Element[] = [];\n            for (let { school, spells } of spellsBySchool(levelSpells)) {\n                let first = true;\n                for (let spell of spells) {\n                    let item = <div key={spell.name} className=\"SpellListItem\">\n                        <LazyLoad once placeholder={<SpellLinkPlaceholder spell={spell}/>}><SpellLink spell={spell}/></LazyLoad>\n                    </div>;\n                    if (first) {\n                        // Include header in a spell list item, so that the header\n                        // won't get placed alone at the end of a line.\n                        spellListItems.push(<div key={spell.name + '-first'} className=\"FirstSpellListItem\">\n                            <div className={headerClass}>{school}</div>\n                            {item}\n                        </div>);\n                        first = false;\n                    } else {\n                        spellListItems.push(item);\n                    }\n                }\n            }\n            elems.push(<div className=\"SpellList\">{spellListItems}</div>);\n        }\n        return <div className=\"SpellbookPanel\">{elems}</div>;\n    }\n}\n\nexport default Spellbook;\n","import React, { Component } from \"react\";\nimport { Spell, Class, allClasses } from \"./model/spell\";\nimport Spellbook from \"./Spellbook\";\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\nimport ToggleButtonGroup from \"react-bootstrap/ToggleButtonGroup\";\nimport \"./FilterableSpellbook.css\";\n\ntype Props = { spells: Spell[] };\ntype State = {\n    classes: Class[]\n};\n\n// TODO: avoid updating local storage here as it breaks composability.\n// Use callbacks instead.\nconst localStorageKey = \"spellbook-filter-state\";\n\nclass FilterableSpellbook extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        let savedState = localStorage.getItem(localStorageKey);\n        if (savedState) {\n            this.state = JSON.parse(savedState);\n        } else {\n            this.state = {\n                classes: []\n            };\n        }\n    }\n\n    updateClasses(values: Class[]) {\n        this.setState({\n            ...this.state,\n            classes: values\n        }, () => {\n            localStorage.setItem(\"spellbook-filter-state\", JSON.stringify(this.state));\n        });\n    }\n\n    toggleClass(key: Class, value: boolean[]) {\n        let newClasses = this.state.classes.filter(x => x !== key);\n        if (value.includes(true)) {\n            newClasses.push(key);\n        }\n        this.updateClasses(newClasses);\n    }\n\n    getFilteredSpells(): Spell[] {\n        return this.props.spells.filter(val =>\n            this.state.classes.length === 0\n            || val.classes.some(c => this.state.classes.includes(c)));\n    }\n\n    render() {\n        let usefulClasses = allClasses\n            .filter(c => this.props.spells.some(s => s.classes.includes(c)));\n        return <div>\n            {usefulClasses.map(c =>\n                    <ToggleButtonGroup type=\"checkbox\" value={[this.state.classes.includes(c)]} onChange={(vals: any) => this.toggleClass(c, vals)}>\n                        <ToggleButton className=\"ClassButton\" value={true}>\n                            <div className=\"ClassButtonPanel\">\n                                <div className=\"ClassImageBorder\">\n                                    <img className=\"ClassThumbnail\" src={`images/classes/${c}.svg`} alt=\"\"/>\n                                </div>\n                                {c}\n                            </div>\n                        </ToggleButton>\n                    </ToggleButtonGroup>)}\n            <Spellbook spells={this.getFilteredSpells()}/>\n        </div>;\n    }\n}\n\nexport default FilterableSpellbook;\n","import React, { PureComponent } from \"react\";\nimport { Spell, getSpellType, getSpellId } from \"./model/spell\";\nimport SpellThumbnail from \"./SpellThumbnail\";\nimport Autosuggest, { SuggestionsFetchRequestedParams, ChangeEvent, RenderSuggestionParams, SuggestionSelectedEventData, BlurEvent } from \"react-autosuggest\";\nimport { withRouter, RouteComponentProps } from \"react-router\";\nimport { Paper, MenuItem } from \"@material-ui/core\";\nimport Fuse from \"fuse.js\";\nimport \"./SpellSearchBox.css\";\n\ntype Props = RouteComponentProps<any> & {\n    spells: Spell[];\n    onFocus?: (event: React.FocusEvent<any>) => void;\n    onBlur?: (event: React.FocusEvent<any>, params?: BlurEvent<Spell>) => void;\n}\n\nclass SpellSearchBox extends PureComponent<Props, { query: string, suggestions: Spell[] }> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            suggestions: [],\n            query: \"\"\n        };\n    }\n\n    onSuggestionsClearRequested() {\n        this.setState({\n            suggestions: []\n        });\n    }\n\n    onSuggestionsFetchRequested(request: SuggestionsFetchRequestedParams, fuse: Fuse<Spell>): void {\n        this.setState({\n            suggestions: fuse.search(request.value).slice(0, 10)\n        });\n    }\n\n    onSuggestionSelected(\n        _event: React.FormEvent<any>,\n        data: SuggestionSelectedEventData<Spell>): void {\n\n        this.props.history.push(`/spell/${getSpellId(data.suggestion)}`);\n    }\n\n    onQueryChange(_event: React.FormEvent<any>, params: ChangeEvent): void {\n        this.setState({\n            query: params.newValue\n        });\n    }\n\n    renderSuggestion(spell: Spell, { isHighlighted }: RenderSuggestionParams) {\n        return <MenuItem selected={isHighlighted} component=\"div\">\n            <SpellThumbnail className=\"SearchItemThumbnail\" spell={spell} />\n            <span className=\"SearchItemName\">{spell.name}</span>\n            <span className=\"SearchItemType\">{getSpellType(spell)}</span>\n        </MenuItem>;\n    }\n\n    render() {\n        if (this.props.spells.length === 0) {\n            return [];\n        }\n\n        const options = {\n            shouldSort: true,\n            threshold: 0.6,\n            location: 0,\n            distance: 100,\n            maxPatternLength: 32,\n            minMatchCharLength: 1,\n            keys: [\"name\"]\n        };\n\n        const fuse = new Fuse(this.props.spells, options);\n\n        const inputProps = {\n            placeholder: \"Search spells...\",\n            value: this.state.query,\n            onChange: this.onQueryChange.bind(this),\n            onFocus: this.props.onFocus,\n            onBlur: this.props.onBlur\n        };\n        return <Autosuggest\n            suggestions={this.state.suggestions}\n            onSuggestionsFetchRequested={request => this.onSuggestionsFetchRequested(request, fuse)}\n            onSuggestionsClearRequested={this.onSuggestionsClearRequested.bind(this)}\n            onSuggestionSelected={this.onSuggestionSelected.bind(this)}\n            inputProps={inputProps}\n            getSuggestionValue={suggestion => suggestion.name}\n            renderSuggestion={this.renderSuggestion}\n            renderSuggestionsContainer={options => (\n                <Paper {...options.containerProps} square>\n                    {options.children}\n                </Paper>\n            )}\n            />;\n    }\n}\n\nexport default withRouter(SpellSearchBox);\n","import { Component } from \"react\";\nimport React from \"react\";\nimport SpellSearchBox from \"./SpellSearchBox\";\nimport { AppBar, Toolbar, Typography } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport { Spell } from \"./model/spell\";\nimport { isMobile } from \"react-device-detect\";\nimport \"./SpellbookAppBar.css\";\n\nclass SpellbookAppBar extends Component<{ spells: Spell[] }, { isSearching: boolean }> {\n    constructor(props: { spells: Spell[] }) {\n        super(props);\n        this.state = {\n            isSearching: false\n        };\n    }\n\n    toggleSearching(isSearching: boolean) {\n        if (this.state.isSearching !== isSearching) {\n            this.setState({ isSearching });\n        }\n    }\n\n    createClasses(baseName: string): string {\n        let suffix = this.state.isSearching ? \"searching\" : \"notsearching\";\n        return `${baseName} ${baseName}-${suffix}`;\n    }\n\n    render() {\n        return <AppBar position=\"sticky\">\n                <Toolbar variant={isMobile ? \"regular\" : \"dense\"}>\n                    <Link to=\"/\" className={this.createClasses(\"AppTitle\")}><Typography variant=\"h6\">Spellbook</Typography></Link>\n                    <span className={this.createClasses(\"AppBarSeparator\")} />\n                    <div className={this.createClasses(\"AppBarSearchBox\")}>\n                    <SpellSearchBox\n                        spells={this.props.spells}\n                        onFocus={() => this.toggleSearching(true)}\n                        onBlur={() => this.toggleSearching(false)} />\n                    </div>\n                </Toolbar>\n            </AppBar>;\n    }\n}\n\nexport default SpellbookAppBar;\n","export type Season = \"Halloween\" | \"Christmas\" | \"NewYear\";\n\ntype SeasonDuration = {\n    from: { month: number, day: number },\n    to: { month: number, day: number }\n};\n\ntype SeasonDescription = {\n    name: Season;\n    duration: SeasonDuration;\n};\n\nfunction isInSeason(date: Date, season: SeasonDuration): boolean {\n    let { from, to } = season;\n    // Increment the month because the Date API numbers months starting\n    // at zero, so January is month number zero. The first day of the\n    // month is numbered as one, though.\n    let month = date.getMonth() + 1;\n    let day = date.getDate();\n\n    if (from.month > to.month) {\n        // The season spans New Year's Eve, which we need to take into account.\n        if (month < from.month && month > to.month) {\n            return false;\n        }\n    } else {\n        if (month < from.month || month > to.month) {\n            return false;\n        }\n    }\n\n    if (month === from.month && day < from.day) {\n        return false;\n    } else if (month === to.month && day > to.day) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\nfunction getCurrentSeasons(): Season[] {\n    let seasons: SeasonDescription[] = [\n        {\n            name: \"Halloween\",\n            duration: {\n                from: { month: 10, day: 1 },\n                to: { month: 10, day: 31 }\n            }\n        },\n        {\n            name: \"Christmas\",\n            duration: {\n                from: { month: 11, day: 14 },\n                to: { month: 12, day: 25 }\n            }\n        },\n        {\n            name: \"NewYear\",\n            duration: {\n                from: { month: 12, day: 26 },\n                to: { month: 1, day: 5 }\n            }\n        }\n    ];\n    let results: Season[] = [];\n    let today = new Date();\n    for (let { name, duration } of seasons) {\n        if (isInSeason(today, duration)) {\n            results.push(name);\n        }\n    }\n    return results;\n}\n\nexport const currentSeasons = getCurrentSeasons();\n","import React, { Component, lazy, Suspense } from 'react';\nimport { Route, HashRouter } from 'react-router-dom';\nimport './App.css';\nimport { Spell, getSpellId } from './model/spell';\nimport SpellCard from './SpellCard';\nimport FilterableSpellbook from './FilterableSpellbook';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport pink from '@material-ui/core/colors/pink';\nimport SpellbookAppBar from './SpellbookAppBar';\nimport { currentSeasons } from './model/season';\n\nconst LinterResults = lazy(() => import('./LinterResults'));\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: pink,\n  },\n});\n\nclass App extends Component<{}, { allSpells: Spell[] }> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      allSpells: []\n    };\n  }\n\n  componentDidMount() {\n    // Fetch spell database.\n    fetch(\"data/spells.json\")\n    .then(response => response.json())\n    .then(json => {\n      this.setState({\n        allSpells: json\n      });\n    });\n  }\n\n  getMainClass(): string {\n    return [\"App\", ...currentSeasons].join(\" \");\n  }\n\n  render() {\n    return <HashRouter>\n        <div className={this.getMainClass()}>\n          <MuiThemeProvider theme={theme}>\n            <SpellbookAppBar spells={this.state.allSpells} />\n            <div className=\"App-body\">\n              <Suspense fallback={<div>Loading...</div>}>\n                <Route exact={true} path=\"/\" render={routeProps => <FilterableSpellbook key=\"spellbook\" spells={this.state.allSpells}/>} />\n                <Route path=\"/spell/:spellId\" render={routeProps => <SpellRoute {...routeProps} allSpells={this.state.allSpells}/>} />\n                <Route path=\"/linter\" render={routeProps => <LinterRoute {...routeProps} allSpells={this.state.allSpells}/>} />\n              </Suspense>\n            </div>\n          </MuiThemeProvider>\n        </div>\n      </HashRouter>;\n  }\n}\n\nclass SpellRoute extends Component<{ match: any, allSpells: Spell[] }, any> {\n  render() {\n    if (this.props.allSpells.length === 0) {\n      return <div></div>;\n    }\n    let spell = this.props.allSpells.find(val => getSpellId(val) === this.props.match.params.spellId);\n    if (spell) {\n      return <div className=\"SpellCardBox\"><SpellCard spell={spell} /></div>;\n    } else {\n      let thumbStyle = {width: \"30px\", height: \"30px\"};\n      return <div>\n        <img style={{...thumbStyle, transform: \"scaleX(-1)\"}} src=\"images/classes/wizard.svg\" alt=\"\" />\n        <img style={thumbStyle} src=\"images/classes/warlock.svg\" alt=\"\" />\n        <img style={thumbStyle} src=\"images/classes/wizard.svg\" alt=\"\" />\n        <h1>Error 404</h1>\n        Spell with ID '{this.props.match.params.spellId}' not found.\n      </div>;\n    }\n  }\n}\n\nclass LinterRoute extends Component<{ match: any, allSpells: Spell[] }, any> {\n  render() {\n    if (this.props.allSpells.length === 0) {\n      return <div></div>;\n    }\n    return <LinterResults spells={this.props.allSpells} />;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { PureComponent } from \"react\";\nimport { Spell, getSpellThumbnailUrl } from \"./model/spell\";\nimport './SpellThumbnail.css';\n\n/**\n * A thumbnail for a spell.\n */\nclass SpellThumbnail extends PureComponent<{spell: Spell, showImage?: boolean, className?: string }> {\n    render() {\n        let bgClassName = `SpellThumbnailBackground SpellThumbnailBackground-${this.props.spell.school}`;\n        if (this.props.className) {\n            bgClassName += \" \" + this.props.className;\n        }\n        if (this.props.showImage === undefined || this.props.showImage) {\n            return <div className={bgClassName}>\n                    <img className=\"SpellThumbnail\" src={getSpellThumbnailUrl(this.props.spell)} alt=\"\" />\n                </div>;\n        } else {\n            return <div className={bgClassName} />;\n        }\n    }\n}\n\nexport default SpellThumbnail;\n","import React, { PureComponent } from \"react\";\nimport { Spell, getSpellThumbnailUrl, getShortLicenseName, getLicenseUrl, getSpellType, ThumbnailSource } from \"./model/spell\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Link } from \"react-router-dom\";\nimport \"./SpellCard.css\";\nimport \"./hr.css\";\n\ntype Props = {\n    spell: Spell;\n    hide_links?: boolean;\n    hide_footer?: boolean;\n};\n\nconst html_whitelist = [\n    'b', 'i', 'strong', 'br', 'p', 'span', 'div'\n];\n\nfunction is_in_html_whitelist(value: string): boolean {\n    value = value.trim();\n    if (value.startsWith('<')) {\n        for (let item of html_whitelist) {\n            if (value === `<${item}>` || value === `</${item}>` || value === `<${item}/>`) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n/**\n * A card that describes a spell.\n */\nclass SpellCard extends PureComponent<Props> {\n    /**\n     * Create a \"quick stats\" grid to include in the card.\n     */\n    createPropertiesGrid() {\n        let components = [];\n        if (this.props.spell.components.verbal) {\n            components.push(\"V\");\n        }\n        if (this.props.spell.components.somatic) {\n            components.push(\"S\");\n        }\n        if (this.props.spell.components.material) {\n            components.push(\"M\");\n        }\n        return <div className=\"SpellPropertiesGrid\">\n            <div className=\"SpellPropertyItem\">\n                <div className=\"SpellPropertyItemName\">Casting time</div>\n                <div>{this.props.spell.casting_time}</div>\n            </div>\n            <div className=\"SpellPropertyItem\">\n                <div className=\"SpellPropertyItemName\">Range</div>\n                <div>{this.props.spell.range}</div>\n            </div>\n            <div className=\"SpellPropertyItem\">\n                <div className=\"SpellPropertyItemName\">Components</div>\n                <div>{components.join(\", \")}</div>\n            </div>\n            <div className=\"SpellPropertyItem\">\n                <div className=\"SpellPropertyItemName\">Duration</div>\n                <div>{this.props.spell.duration}</div>\n            </div>\n        </div>;\n    }\n\n    createFactFootnote(key: string, value: any) {\n        return <div className=\"SpellFootnote\"><span className=\"SpellPropertyItemName\">{key}:</span> {value}</div>;\n    }\n\n    /**\n     * Creates an \"additional facts\" sheet, which is essentially a collection\n     * of footnotes.\n     */\n    createFootnotes(): JSX.Element[] {\n        let elems: JSX.Element[] = [];\n        let mats = this.props.spell.components.materials_needed;\n        if (mats && mats.length > 0) {\n            elems.push(this.createFactFootnote(\"Materials\", mats.join(\"; \")));\n        }\n        elems.push(this.createFactFootnote(\"Classes\", this.props.spell.classes.join(\", \")));\n        return elems;\n    }\n\n    private renderLink(props: { href: string, title: string, children: any[] }) {\n        if (this.props.hide_links) {\n            return <span>{props.children}</span>;\n        } else {\n            return <Link to={props.href}>{props.children}</Link>;\n        }\n    }\n\n    private allowNode(node: any): boolean {\n        if (node.type === \"html\") {\n            return is_in_html_whitelist(node.value);\n        } else {\n            return true;\n        }\n    }\n\n    private formatDescription(description: string): JSX.Element {\n        let updatedDesc = description.replace(/\\\\n/g, \"\\n\");\n        let renderers = {\n            link: this.renderLink.bind(this)\n        };\n        return <ReactMarkdown\n            className=\"SpellDescription\"\n            source={updatedDesc}\n            renderers={renderers}\n            allowNode={this.allowNode.bind(this)}\n            escapeHtml={false}\n            unwrapDisallowed={true} />;\n    }\n\n    /**\n     * Creates a textual description of the spell.\n     */\n    createDescription(): JSX.Element {\n        let baseDesc = this.formatDescription(this.props.spell.description);\n        if (this.props.spell.quote && this.props.spell.quote.length > 0) {\n            baseDesc = <div>\n                <div className=\"SpellCardFlavorQuote\">“{this.props.spell.quote}”</div>\n                {baseDesc}\n            </div>;\n        }\n        if (this.props.spell.higher_levels) {\n            return <div>\n                {baseDesc}\n                <hr/>\n                {this.formatDescription(this.props.spell.higher_levels)}\n            </div>;\n        } else {\n            return baseDesc;\n        }\n    }\n\n    createSourceCitation(): JSX.Element[] {\n        let src = this.props.spell.source;\n        if (src) {\n            let pageAttribution = src.pages\n                ? \", p. \" + src.pages\n                : \"\";\n\n            return [\n                this.createFactFootnote(\"Source\", <span><i>{src.document}</i>{pageAttribution}.</span>)\n            ];\n        } else {\n            return [];\n        }\n    }\n\n    createExternalLink(text: string, url?: string): JSX.Element | string {\n        if (!url || url.length === 0 || this.props.hide_links) {\n            return text;\n        } else {\n            return <a href={url}>{text}</a>;\n        }\n    }\n\n    citeIconSource(source: ThumbnailSource, omitTitle?: boolean): (JSX.Element | string)[] {\n        let results: (JSX.Element | string)[] = [];\n        if (source.title) {\n            results.push(\n                \"'\",\n                this.createExternalLink(source.title, source.url),\n                \"'\");\n        } else if (!omitTitle) {\n            results.push(this.createExternalLink(\"an icon\", source.url));\n        }\n        results.push(\n            \" by \",\n            this.createExternalLink(source.author, source.author_website),\n            \", licensed under \",\n            this.createExternalLink(getShortLicenseName(source.license), getLicenseUrl(source.license)),\n            \".\");\n        return results;\n    }\n\n    createFooter(): (JSX.Element | string)[] {\n        let sources = this.props.spell.thumbnail_source;\n        if (!sources || sources.length === 0 || this.props.hide_footer) {\n            return [];\n        } else {\n            let firstSource = sources[0];\n            let results: (JSX.Element | string)[] = [];\n            if (firstSource.title) {\n                results.push(\"Icon: \", ...this.citeIconSource(firstSource));\n            } else {\n                results.push(this.createExternalLink(\"Icon\", firstSource.url), \" \", ...this.citeIconSource(firstSource, true));\n            }\n            for (let i = 1; i < sources.length; i++) {\n                results.push(\" Based on \", ...this.citeIconSource(sources[i]));\n            }\n            return results;\n        }\n    }\n\n    render() {\n        let thumbnailUrl = getSpellThumbnailUrl(this.props.spell);\n        let thumbnailSource = this.createFooter();\n        return <div className=\"SpellCardPanel\">\n            <div className=\"SpellCardDescription\">\n                <img className=\"SpellCardThumbnail\" src={thumbnailUrl} alt={this.props.spell.name + \" thumbnail\"} />\n                <div className=\"SpellType\">{getSpellType(this.props.spell)}</div>\n                <div className=\"SpellName\">{this.props.spell.name}</div>\n                <hr/>\n                {this.createPropertiesGrid()}\n                <hr/>\n                {this.createDescription()}\n                <hr/>\n                {this.createFootnotes()}\n                {this.createSourceCitation()}\n            </div>\n            <div className=\"SpellCardFooter\">\n                {thumbnailSource.length > 0 ? <hr/> : []}\n                {this.createFooter()}\n            </div>\n        </div>;\n    }\n}\n\nexport default SpellCard;\n","// Based on jonathandion's react-tilt component, licensed under the MIT license.\n\nimport React, { Component } from 'react';\nimport { findDOMNode } from 'react-dom';\n\ntype Settings = {\n  reverse: boolean,\n  max: number,\n  perspective: number,\n  easing: string,\n  scale: string,\n  speed: number,\n  transition: number,\n  axis: any,\n  reset: boolean,\n};\n\ntype Props = {\n  onPointerEnter?: (e?: React.PointerEvent) => {},\n  onPointerMove?: (e: React.PointerEvent) => {},\n  onPointerLeave?: (e: React.PointerEvent) => {},\n  options?: Settings,\n  className?: string,\n  style?: React.StyleHTMLAttributes<HTMLDivElement>\n};\n\ntype State = {\n  style: React.StyleHTMLAttributes<HTMLDivElement>\n};\n\nclass Tilt extends Component<Props, State> {\n  private width: number | null;\n  private height: number | null;\n  private left: number | null;\n  private top: number | null;\n  private transitionTimeout: number | null;\n  private updateCall: number | null;\n  private element: any;\n  private settings: Settings;\n  private reverse: number;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      style: {}\n    }\n\n    const defaultSettings = {\n      reverse: false,\n      max: 35,\n      perspective: 1000,\n      easing: \"cubic-bezier(.03,.98,.52,.99)\",\n      scale: \"1.1\",\n      speed: 1000,\n      transition: true,\n      axis: null,\n      reset: true\n    };\n\n    this.width = null;\n    this.height = null;\n    this.left = null;\n    this.top = null;\n    this.transitionTimeout = null;\n    this.updateCall = null;\n    this.element = null;\n    this.settings = Object.assign({}, defaultSettings, this.props.options);\n    this.reverse = this.settings.reverse ? -1 : 1;\n  }\n\n  componentDidMount() {\n    this.element = findDOMNode(this);\n    const myNode = this.element;\n    setTimeout(() => {\n      if (myNode.parentElement.querySelector(':hover') === myNode) {\n        this.onPointerEnter();\n      }\n    }, 0);\n  }\n\n  componentWillUnmount() {\n    if (this.transitionTimeout !== null) {\n      clearTimeout(this.transitionTimeout);\n    }\n    if (this.updateCall !== null) {\n      cancelAnimationFrame(this.updateCall);\n    }\n  }\n\n  onPointerEnter(e?: React.PointerEvent) {\n    this.updateElementPosition();\n\n    this.setState(Object.assign({}, this.state, {\n      style: {\n        ...this.state.style,\n        willChange: \"transform\"\n      }\n    }))\n\n    this.setTransition();\n\n    if (this.props.onPointerEnter) {\n      return this.props.onPointerEnter(e);\n    } else {\n      return {};\n    }\n  }\n\n  reset() {\n    window.requestAnimationFrame(() => {\n      this.setState(Object.assign({}, this.state, {\n        style: {\n          ...this.state.style,\n          transform: \"perspective(\" + this.settings.perspective + \"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)\"\n        }\n      }))\n    });\n  }\n\n  onPointerMove(e: React.PointerEvent) {\n    e.persist();\n\n    if (this.updateCall !== null) {\n      window.cancelAnimationFrame(this.updateCall);\n    }\n\n    // this.event = e;\n    this.updateCall = requestAnimationFrame(this.update.bind(this, e));\n\n    if (this.props.onPointerMove) {\n      return this.props.onPointerMove(e);\n    } else {\n      return {};\n    }\n  }\n\n  setTransition() {\n    if (this.transitionTimeout !== null) {\n      clearTimeout(this.transitionTimeout);\n    }\n\n    this.setState(Object.assign({}, this.state, {\n      style: {\n        ...this.state.style,\n        transition: this.settings.speed + \"ms \" + this.settings.easing\n      }\n    }))\n\n    this.transitionTimeout = setTimeout(() => {\n      this.setState(Object.assign({}, this.state, {\n        style: {\n          ...this.state.style,\n          transition: ''\n        }\n      }))\n    }, this.settings.speed) as unknown as number;\n  }\n\n  onPointerLeave(e: React.PointerEvent) {\n    this.setTransition();\n\n    if (this.settings.reset) {\n      this.reset();\n    }\n\n    if (this.props.onPointerLeave) {\n      return this.props.onPointerLeave(e);\n    } else {\n      return {};\n    }\n  }\n\n  getValues(e: React.PointerEvent) {\n    const x = (e.nativeEvent.clientX - this.left!) / this.width!;\n    const y = (e.nativeEvent.clientY - this.top!) / this.height!;\n    const _x = Math.min(Math.max(x, 0), 1);\n    const _y = Math.min(Math.max(y, 0), 1);\n\n    const tiltX = (this.reverse * (this.settings.max / 2 - _x * this.settings.max)).toFixed(2);\n    const tiltY = (this.reverse * (_y * this.settings.max - this.settings.max / 2)).toFixed(2);\n\n    const percentageX = _x * 100\n    const percentageY = _y * 100\n\n    return {\n      tiltX,\n      tiltY,\n      percentageX,\n      percentageY\n    };\n  }\n\n  updateElementPosition() {\n    const rect = this.element.getBoundingClientRect();\n    this.width = this.element.offsetWidth;\n    this.height = this.element.offsetHeight;\n    this.left = rect.left;\n    this.top = rect.top;\n  }\n\n  update(e: React.PointerEvent) {\n    let values = this.getValues(e);\n\n    this.setState(Object.assign({}, this.state, {\n      style: {\n        ...this.state.style,\n        transform: \"perspective(\" + this.settings.perspective + \"px) \" +\n          \"rotateX(\" + (this.settings.axis === \"x\" ? 0 : values.tiltY) + \"deg) \" +\n          \"rotateY(\" + (this.settings.axis === \"y\" ? 0 : values.tiltX) + \"deg) \" +\n          \"scale3d(\" + this.settings.scale + \", \" + this.settings.scale + \", \" + this.settings.scale + \")\"\n      }\n    }))\n\n    this.updateCall = null;\n  }\n\n  render() {\n    const style = Object.assign({}, this.props.style, this.state.style);\n    return <div style={style}\n        className={this.props.className}\n        onPointerEnter={this.onPointerEnter.bind(this)}\n        onPointerMove={this.onPointerMove.bind(this)}\n        onPointerLeave={this.onPointerLeave.bind(this)}>\n        {this.props.children}\n      </div>;\n  }\n}\n\nexport default Tilt;\n","import React, { PureComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport ReactHover from \"react-hover\";\nimport Tilt from \"./Tilt\";\nimport { Spell, getSpellId } from \"./model/spell\";\nimport './SpellLink.css';\nimport SpellCard from \"./SpellCard\";\nimport SpellThumbnail from \"./SpellThumbnail\";\n\n/**\n * Creates a URL to a spell card.\n * @param spell The spell to create a URL for.\n */\nexport function createSpellUrl(spell: Spell) {\n    return `/spell/${getSpellId(spell)}`;\n}\n\n/**\n * A reference to a spell, formatted as an image.\n */\nclass SpellLink extends PureComponent<{spell: Spell}> {\n    render() {\n        const hoverOptions = {\n            followCursor: false,\n            shiftX: 20,\n            shiftY: 0\n        };\n        let spellLink = createSpellUrl(this.props.spell);\n        let linkImage = <Link className=\"SpellLink\" to={spellLink}>\n                <SpellThumbnail className=\"SpellLinkThumbnail\" spell={this.props.spell} />\n                <div>{this.props.spell.name}</div>\n            </Link>;\n        if (isMobile) {\n            return <Tilt>{linkImage}</Tilt>;\n        } else {\n            return <ReactHover options={hoverOptions}>\n                    <ReactHover.Trigger type='trigger'>\n                        {linkImage}\n                    </ReactHover.Trigger>\n                    <ReactHover.Hover type='hover'>\n                        <div className=\"ExtraSpellBox\">\n                            <Link className=\"ExtraSpellLink\" to={spellLink}>\n                                <SpellCard spell={this.props.spell} hide_links hide_footer />\n                            </Link>\n                        </div>\n                    </ReactHover.Hover>\n                </ReactHover>;\n        }\n    }\n}\n\nexport class SpellLinkPlaceholder extends PureComponent<{spell: Spell}> {\n    render() {\n        let spellLink = createSpellUrl(this.props.spell);\n        return <Link className=\"SpellLink\" to={spellLink}>\n                <SpellThumbnail className=\"SpellLinkThumbnail\" spell={this.props.spell} showImage={false} />\n                <div>{this.props.spell.name}</div>\n            </Link>;\n    }\n}\n\nexport default SpellLink;\n"],"sourceRoot":""}