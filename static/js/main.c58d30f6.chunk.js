(window["webpackJsonpdnd-spellbook"]=window["webpackJsonpdnd-spellbook"]||[]).push([[0],{141:function(e,t,n){},144:function(e,t,n){},148:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(19),l=n.n(s),i=(n(57),n(18)),o=n(4),c=n(5),u=n(7),p=n(6),h=n(8),m=n(14),v=n(15),f=(n(58),["barbarian","bard","cleric","druid","fighter","monk","paladin","ranger","rogue","sorcerer","warlock","wizard"]);function d(e){return e.thumbnail_url?e.thumbnail_url:"images/schools/".concat(e.school,".svg")}var y=["cantrip","1","2","3","4","5","6","7","8","9"],b=["abjuration","conjuration","divination","enchantment","evocation","illusion","necromancy","transmutation"];function g(e,t){return e.sort(function(e,n){var r=t(e),a=t(n);return+(r>a)-+(a>r)})}function O(e,t,n){var r=new Map,a=!0,s=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value,u=n(c),p=r.get(u);p||(p=[],r.set(u,p)),p.push(c)}}catch(O){s=!0,l=O}finally{try{a||null==o.return||o.return()}finally{if(s)throw l}}var h=[],m=!0,v=!1,f=void 0;try{for(var d,y=t[Symbol.iterator]();!(m=(d=y.next()).done);m=!0){var b=d.value,g=r.get(b);g&&h.push({key:b,values:g})}}catch(O){v=!0,f=O}finally{try{m||null==y.return||y.return()}finally{if(v)throw f}}return h}function E(e){return O(g(e,function(e){return e.name}),b,function(e){return e.school}).map(function(e){return{school:e.key,spells:e.values}})}function j(e){var t=e.name,n=/[0-9a-zA-Z]/,r="",a=!1,s=!0,l=!1,i=void 0;try{for(var o,c=t.toLowerCase()[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var u=o.value;n.test(u)?(r+=u,a=!1):a||(r+="-",a=!0)}}catch(p){l=!0,i=p}finally{try{s||null==c.return||c.return()}finally{if(l)throw i}}return r}var k=n(46),S=n.n(k),w=(n(141),n(45),["b","i","strong","br","p","span","div"]);var P=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createPropertiesGrid",value:function(){var e=[];return this.props.spell.components.verbal&&e.push("V"),this.props.spell.components.somatic&&e.push("S"),this.props.spell.components.material&&e.push("M"),a.a.createElement("div",{className:"SpellPropertiesGrid"},a.a.createElement("div",{className:"SpellPropertyItem"},a.a.createElement("div",{className:"SpellPropertyItemName"},"Casting time"),a.a.createElement("div",null,this.props.spell.casting_time)),a.a.createElement("div",{className:"SpellPropertyItem"},a.a.createElement("div",{className:"SpellPropertyItemName"},"Range"),a.a.createElement("div",null,this.props.spell.range)),a.a.createElement("div",{className:"SpellPropertyItem"},a.a.createElement("div",{className:"SpellPropertyItemName"},"Components"),a.a.createElement("div",null,e.join(", "))),a.a.createElement("div",{className:"SpellPropertyItem"},a.a.createElement("div",{className:"SpellPropertyItemName"},"Duration"),a.a.createElement("div",null,this.props.spell.duration)))}},{key:"createFactFootnote",value:function(e,t){return a.a.createElement("div",{className:"SpellFootnote"},a.a.createElement("span",{className:"SpellPropertyItemName"},e,":")," ",t)}},{key:"createFootnotes",value:function(){var e=[],t=this.props.spell.components.materials_needed;return t&&t.length>0&&e.push(this.createFactFootnote("Materials",t.join("; "))),e.push(this.createFactFootnote("Classes",this.props.spell.classes.join(", "))),e}},{key:"renderLink",value:function(e){return this.props.hide_links?a.a.createElement("span",null,e.children):a.a.createElement(m.b,{to:e.href},e.children)}},{key:"allowNode",value:function(e){return"html"!==e.type||function(e){if((e=e.trim()).startsWith("<"))for(var t=0,n=w;t<n.length;t++){var r=n[t];if(e==="<".concat(r,">")||e==="</".concat(r,">")||e==="<".concat(r,"/>"))return!0}return!1}(e.value)}},{key:"formatDescription",value:function(e){var t=e.replace(/\\n/g,"\n"),n={link:this.renderLink.bind(this)};return a.a.createElement(S.a,{className:"SpellDescription",source:t,renderers:n,allowNode:this.allowNode.bind(this),escapeHtml:!1,unwrapDisallowed:!0})}},{key:"createDescription",value:function(){var e=this.formatDescription(this.props.spell.description);return this.props.spell.higher_levels?a.a.createElement("div",null,e,a.a.createElement("hr",null),this.formatDescription(this.props.spell.higher_levels)):e}},{key:"createSourceCitation",value:function(){var e=this.props.spell.source;if(e){var t=e.pages?", p. "+e.pages:"";return[this.createFactFootnote("Source",a.a.createElement("span",null,a.a.createElement("i",null,e.document),t,"."))]}return[]}},{key:"render",value:function(){var e=d(this.props.spell);return a.a.createElement("div",{className:"SpellCardPanel"},a.a.createElement("img",{className:"SpellThumbnail",src:e,alt:this.props.spell.name+" thumbnail"}),a.a.createElement("div",{className:"SpellType"},this.props.spell.type),a.a.createElement("div",{className:"SpellName"},this.props.spell.name),a.a.createElement("hr",null),this.createPropertiesGrid(),a.a.createElement("hr",null),this.createDescription(),a.a.createElement("hr",null),this.createFootnotes(),this.createSourceCitation())}}]),t}(r.PureComponent),N=n(23),C=(n(144),n(26)),x=n.n(C);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).width=void 0,n.height=void 0,n.left=void 0,n.top=void 0,n.transitionTimeout=void 0,n.updateCall=void 0,n.element=void 0,n.settings=void 0,n.reverse=void 0,n.state={style:{}};return n.width=null,n.height=null,n.left=null,n.top=null,n.transitionTimeout=null,n.updateCall=null,n.element=null,n.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:1e3,transition:!0,axis:null,reset:!0},n.props.options),n.reverse=n.settings.reverse?-1:1,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.element=Object(s.findDOMNode)(this);var t=this.element;setTimeout(function(){t.parentElement.querySelector(":hover")===t&&e.onPointerEnter()},0)}},{key:"componentWillUnmount",value:function(){null!==this.transitionTimeout&&clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall)}},{key:"onPointerEnter",value:function(e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:T({},this.state.style,{willChange:"transform"})})),this.setTransition(),this.props.onPointerEnter?this.props.onPointerEnter(e):{}}},{key:"reset",value:function(){var e=this;window.requestAnimationFrame(function(){e.setState(Object.assign({},e.state,{style:T({},e.state.style,{transform:"perspective("+e.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}))})}},{key:"onPointerMove",value:function(e){return e.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.updateCall=requestAnimationFrame(this.update.bind(this,e)),this.props.onPointerMove?this.props.onPointerMove(e):{}}},{key:"setTransition",value:function(){var e=this;null!==this.transitionTimeout&&clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:T({},this.state.style,{transition:this.settings.speed+"ms "+this.settings.easing})})),this.transitionTimeout=setTimeout(function(){e.setState(Object.assign({},e.state,{style:T({},e.state.style,{transition:""})}))},this.settings.speed)}},{key:"onPointerLeave",value:function(e){return this.setTransition(),this.settings.reset&&this.reset(),this.props.onPointerLeave?this.props.onPointerLeave(e):{}}},{key:"getValues",value:function(e){var t=(e.nativeEvent.clientX-this.left)/this.width,n=(e.nativeEvent.clientY-this.top)/this.height,r=Math.min(Math.max(t,0),1),a=Math.min(Math.max(n,0),1);return{tiltX:(this.reverse*(this.settings.max/2-r*this.settings.max)).toFixed(2),tiltY:(this.reverse*(a*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*r,percentageY:100*a}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(e){var t=this.getValues(e);this.setState(Object.assign({},this.state,{style:T({},this.state.style,{transform:"perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:t.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:t.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")"})})),this.updateCall=null}},{key:"render",value:function(){var e=Object.assign({},this.props.style,this.state.style);return a.a.createElement("div",{style:e,className:this.props.className,onPointerEnter:this.onPointerEnter.bind(this),onPointerMove:this.onPointerMove.bind(this),onPointerLeave:this.onPointerLeave.bind(this)},this.props.children)}}]),t}(r.Component),L=(n(148),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="/spell/".concat(j(this.props.spell)),t="SpellLinkThumbnail SpellLinkThumbnail-".concat(this.props.spell.school),n=a.a.createElement(m.b,{className:"SpellLink",to:e},a.a.createElement("img",{className:t,src:d(this.props.spell),alt:""}),a.a.createElement("div",null,this.props.spell.name));return N.isMobile?a.a.createElement(F,null,n):a.a.createElement(x.a,{options:{followCursor:!1,shiftX:20,shiftY:0}},a.a.createElement(x.a.Trigger,{type:"trigger"},n),a.a.createElement(x.a.Hover,{type:"hover"},a.a.createElement("div",{className:"ExtraSpellBox"},a.a.createElement(m.b,{className:"ExtraSpellLink",to:e},a.a.createElement(P,{spell:this.props.spell,hide_links:!0})))))}}]),t}(r.PureComponent)),I=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="/spell/".concat(j(this.props.spell)),t="SpellLinkThumbnail SpellLinkThumbnail-".concat(this.props.spell.school);return a.a.createElement(m.b,{className:"SpellLink",to:e},a.a.createElement("div",{className:t}),a.a.createElement("div",null,this.props.spell.name))}}]),t}(r.PureComponent),M=L,A=n(49),B=n.n(A),X=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="SpellSchoolHeader Sideways"+(N.isFirefox?"Firefox":"Other"),t=[],n=!0,r=!1,s=void 0;try{for(var l,i=function(e){return O(g(e,function(e){return e.name}),y,function(e){return e.level}).map(function(e){return{level:e.key,spells:e.values}})}(this.props.spells)[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var o=l.value,c=o.level,u=o.spells,p="cantrip"===c?"Cantrips":"Level ".concat(c," spells");t.push(a.a.createElement("div",{className:"LevelHeader"},p));var h=[],m=!0,v=!1,f=void 0;try{for(var d,b=E(u)[Symbol.iterator]();!(m=(d=b.next()).done);m=!0){var j=d.value,k=j.school,S=j.spells,w=!0,P=!0,C=!1,x=void 0;try{for(var D,T=S[Symbol.iterator]();!(P=(D=T.next()).done);P=!0){var F=D.value,L=a.a.createElement("div",{key:F.name,className:"SpellListItem"},a.a.createElement(B.a,{once:!0,placeholder:a.a.createElement(I,{spell:F})},a.a.createElement(M,{spell:F})));w?(h.push(a.a.createElement("div",{key:F.name+"-first",className:"FirstSpellListItem"},a.a.createElement("div",{className:e},k),L)),w=!1):h.push(L)}}catch(A){C=!0,x=A}finally{try{P||null==T.return||T.return()}finally{if(C)throw x}}}}catch(A){v=!0,f=A}finally{try{m||null==b.return||b.return()}finally{if(v)throw f}}t.push(a.a.createElement("div",{className:"SpellList"},h))}}catch(A){r=!0,s=A}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return a.a.createElement("div",{className:"SpellbookPanel"},t)}}]),t}(r.PureComponent),_=n(156),Y=n(51);n(153);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var H="spellbook-filter-state",W=function(e){function t(e){var n;Object(o.a)(this,t),n=Object(u.a)(this,Object(p.a)(t).call(this,e));var r=localStorage.getItem(H);return n.state=r?JSON.parse(r):{classes:[]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"updateClasses",value:function(e){var t=this;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.state,{classes:e}),function(){localStorage.setItem("spellbook-filter-state",JSON.stringify(t.state))})}},{key:"toggleClass",value:function(e,t){var n=this.state.classes.filter(function(t){return t!==e});t.includes(!0)&&n.push(e),this.updateClasses(n)}},{key:"getFilteredSpells",value:function(){var e=this;return this.props.spells.filter(function(t){return 0===e.state.classes.length||t.classes.some(function(t){return e.state.classes.includes(t)})})}},{key:"render",value:function(){var e=this,t=f.filter(function(t){return e.props.spells.some(function(e){return e.classes.includes(t)})});return a.a.createElement("div",null,t.map(function(t){return a.a.createElement(_.a,{type:"checkbox",value:[e.state.classes.includes(t)],onChange:function(n){return e.toggleClass(t,n)}},a.a.createElement(Y.a,{className:"ClassButton",value:!0},a.a.createElement("div",{className:"ClassButtonPanel"},a.a.createElement("div",{className:"ClassImageBorder"},a.a.createElement("img",{className:"ClassThumbnail",src:"images/classes/".concat(t,".svg"),alt:""})),t)))}),a.a.createElement(X,{spells:this.getFilteredSpells()}))}}]),t}(r.Component);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=[],V=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state=G,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("data/spells.json").then(function(e){return e.json()}).then(function(t){G=t,e.setState(t)})}},{key:"render",value:function(){return a.a.createElement(m.a,null,a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(v.a,{exact:!0,path:"/",component:R}),a.a.createElement(v.a,{path:"/spell/:spellId",component:U}))))}}]),t}(r.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",{className:"AppTitle"},"Spellbook"),a.a.createElement(W,{spells:G}))}}]),t}(r.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(0===G.length)return a.a.createElement("div",null);var t=G.find(function(t){return j(t)===e.props.match.params.spellId});if(t)return a.a.createElement("div",{className:"SpellCardBox"},a.a.createElement(P,{spell:t}));var n={width:"30px",height:"30px"};return a.a.createElement("div",null,a.a.createElement("img",{style:q({},n,{transform:"scaleX(-1)"}),src:"images/classes/wizard.svg",alt:""}),a.a.createElement("img",{style:n,src:"images/classes/warlock.svg",alt:""}),a.a.createElement("img",{style:n,src:"images/classes/wizard.svg",alt:""}),a.a.createElement("h1",null,"Error 404"),"Spell with ID '",this.props.match.params.spellId,"' not found.")}}]),t}(r.Component),Z=V;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,n){},52:function(e,t,n){e.exports=n(154)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);
//# sourceMappingURL=main.c58d30f6.chunk.js.map